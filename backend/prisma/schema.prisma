// Prisma schema for PostgreSQL
// Database URL read from env var DATABASE_URL

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Route {
  id             Int      @id @default(autoincrement())
  routeId        String   @unique
  vesselType     String
  fuelType       String
  year           Int
  ghgIntensity   Float    // gCO2e/MJ
  fuelConsumption Float   // tons
  distance       Float    // km
  totalEmissions Float    // tons
  isBaseline     Boolean  @default(false)
}

model ShipCompliance {
  id        Int     @id @default(autoincrement())
  shipId    String
  year      Int
  cbGco2eq  Float   // Compliance Balance in gCO2e (actually MJ*gCO2e delta)
  createdAt DateTime @default(now())

  @@index([shipId, year])
}

model BankEntry {
  id         Int      @id @default(autoincrement())
  shipId     String
  year       Int
  amount     Float    // gCO2e
  createdAt  DateTime @default(now())

  @@index([shipId, year])
}

model Pool {
  id        Int       @id @default(autoincrement())
  year      Int
  createdAt DateTime  @default(now())
  members   PoolMember[]
}

model PoolMember {
  id        Int     @id @default(autoincrement())
  poolId    Int
  shipId    String
  cbBefore  Float
  cbAfter   Float

  pool      Pool    @relation(fields: [poolId], references: [id], onDelete: Cascade)
  @@index([poolId])
}




